<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Harvard Art Museums</title>
<style>
body, html {
	position: fixed;
	cursor: none;
	background-color: #000000;
	width: 100%;
	height: 100%;
	margin: 0px;
	padding: 0px;
	overflow: hidden;
}
</style>

<meta name="apple-mobile-web-app-capable" content="yes" /> 
<meta name="apple-touch-fullscreen" content="yes" />

<script src="/socket.io/socket.io.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>
"use strict";

var xStart = 0;
var yStart = 0;
var xCurr = 0;
var yCurr = 0;
var timedOut = false;
var socket = io('/control-namespace');

document.addEventListener("touchmove", function(e) {
	e.preventDefault();

	xCurr = e.touches[0].pageX;
	yCurr = e.touches[0].pageY;

	var x = xCurr/$(window).width()*110 - 5;
	var y = yCurr/$(window).height()*110 - 5;

	socket.emit("cursor", x, y);
}, false);

document.addEventListener("touchstart", function(e) {
	xCurr = xStart = e.touches[0].pageX;
	yCurr = yStart = e.touches[0].pageY;

	timedOut = false;
	setTimeout(timeOut, 500);
});

document.addEventListener("touchend", function(e) {
	if (!timedOut && (Math.abs(xStart - xCurr) < 5) && (Math.abs(yStart - yCurr) < 5)) {
		socket.emit("click");
	}
});

function timeOut() {
	timedOut = true;
}

</script>
</body>
</html>